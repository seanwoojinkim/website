---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import FillerBlock from '../components/FillerBlock.astro';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects')).sort((a, b) => a.data.order - b.data.order);

// Calculate filler blocks needed to complete the grid
// Grid is typically 3 columns on desktop (auto-fit, minmax(280px, 1fr))
const COLUMNS = 3;
const fillersNeeded = (COLUMNS - (projects.length % COLUMNS)) % COLUMNS;
---

<BaseLayout title="Sean Kim — Interactive Systems" activePage="work">
    <header>
        <!-- h-card for IndieWeb identity -->
        <div class="h-card" style="display: contents;">
            <h1>
                <span class="p-name">Sean Woojin Kim</span> — Selected Work
            </h1>
            <p class="subtitle p-note">
                Interactive systems designer and researcher exploring generative art, biometric installations, and computational media.
            </p>
            <!-- Hidden but parseable URLs for IndieWeb -->
            <a href="https://seanwooj.in" class="u-url u-uid" hidden aria-hidden="true">https://seanwooj.in</a>
            <a href="mailto:seanwoojinkim@gmail.com" class="u-email" hidden aria-hidden="true">Email</a>
        </div>
    </header>

    <div class="grid">
        {projects.map((project, index) => (
            <ProjectCard
                title={project.data.title}
                description={project.data.description}
                status={project.data.status}
                category={project.data.category}
                number={String(index + 1).padStart(2, '0')}
                buttons={project.data.buttons}
            />
        ))}
        {Array.from({ length: fillersNeeded }, (_, i) => (
            <FillerBlock variant={(i % 3) + 1} />
        ))}
    </div>
</BaseLayout>
